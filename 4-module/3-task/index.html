<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Занятие 4: Функция highlight</title>
    <script src="index.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <table class="js-teachers">
      <thead>
        <tr>
          <td>Name</td>
          <td>Age</td>
          <td>Gender</td>
          <td>Status</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Ilia</td>
          <td>30</td>
          <td>m</td>
          <td data-available="true">Free</td>
        </tr>
        <tr>
          <td>Tim</td>
          <td>39</td>
          <td>m</td>
          <td data-available="false">On duty</td>
        </tr>
        <tr>
          <td>Marina</td>
          <td>25</td>
          <td>f</td>
          <td data-available="true">Ready to teach</td>
        </tr>
        <tr>
          <td>Klivden</td>
          <td>42</td>
          <td>m</td>
          <td>Leeeroy Jenkins!</td>
        </tr>
        <tr>
          <td>Ivan</td>
          <td>17</td>
          <td>m</td>
          <td data-available="true">Ready to teach</td>
        </tr>
      </tbody>
    </table>
    <script>
      let table = document.querySelector(".js-teachers");
      function highlight(table) {
        let tr = Array.from(table.rows);

        (function makeAvailable() {
          for (let i = 1; i < tr.length; i++) {
            if (tr[i].cells[3].dataset.available === "true") {
              tr[i].classList.add("available");
            } else if (tr[i].cells[3].dataset.available === "false") {
              tr[i].classList.add("unavailable");
            } else {
              tr[i].setAttribute("hidden", "");
            }
          }
        })();

        (function specifyGender() {
          for (let i = 1; i < tr.length; i++) {
            tr[i].cells[2].textContent === "m"
              ? tr[i].classList.add("male")
              : tr[i].classList.add("female");
          }
        })();

        (function lineThrough() {
          for (let i = 1; i < tr.length; i++) {
            if (Number(tr[i].cells[1].textContent) < 18)
              tr[i].style = "text-decoration: line-through";
          }
        })();
      }

      highlight(table);
    </script>
  </body>
</html>
